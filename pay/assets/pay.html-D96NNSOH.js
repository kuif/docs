import{_ as n,c as s,o as a,a as e}from"./app-O-FW8RaH.js";const t={},p=e(`<h1 align="center">字节跳动支付</h1><p><strong>字节跳动支付目前仅支持小程序，对应的支付 method 如下：</strong></p><table><thead><tr><th style="text-align:center;">method</th><th style="text-align:center;">说明</th><th style="text-align:center;">参数</th><th style="text-align:center;">返回值</th></tr></thead><tbody><tr><td style="text-align:center;">createOrder</td><td style="text-align:center;">小程序支付</td><td style="text-align:center;">array $order</td><td style="text-align:center;">Collection</td></tr></tbody></table><p><strong>支付配置</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token comment"># 字节跳动支付配置</span></span>
<span class="line"><span class="token variable">$bytedanceConfig</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;app_id&#39;</span>        <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// App ID</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;salt&#39;</span>          <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 支付密钥值</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;notify_url&#39;</span>    <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 支付回调地址</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;thirdparty_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 第三方平台服务商 id，非服务商模式留空</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="小程序" tabindex="-1"><a class="header-anchor" href="#小程序"><span>小程序</span></a></h2><h3 id="例子" tabindex="-1"><a class="header-anchor" href="#例子"><span>例子</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token variable">$pay</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\\</span>fengkui<span class="token punctuation">\\</span>Pay<span class="token punctuation">\\</span>Bytedance</span><span class="token punctuation">(</span><span class="token variable">$bytedanceConfig</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$order</span> <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;body&#39;</span>      <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;subject-测试&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 商品描述</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;order_sn&#39;</span>  <span class="token operator">=&gt;</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 商户订单号</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;total_amount&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 订单金额（分）</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$pay</span><span class="token operator">-&gt;</span><span class="token function">createOrder</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 返回 Collection 实例。包含了预下单接口的所有参数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="订单配置参数" tabindex="-1"><a class="header-anchor" href="#订单配置参数"><span>订单配置参数</span></a></h3><p><strong>所有订单配置中，客观参数及配置，扩展包已自动处理</strong>，<br> 除必传参数外，如需传入其他参数，可根据自己需求任意修改扩展</p><p>所有订单配置参数和官方无异，参数请参考<a href="https://microapp.bytedance.com/docs/zh-CN/mini-app/develop/server/ecpay/APIlist/pay#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0" target="_blank" rel="noopener noreferrer">这里</a>，查看「请求参数」一栏。</p><h3 id="调用支付" tabindex="-1"><a class="header-anchor" href="#调用支付"><span>调用支付</span></a></h3><p>小程序支付的调用，请参考<a href="https://microapp.bytedance.com/docs/zh-CN/mini-app/develop/server/ecpay/APIlist/pay#%E4%BA%8C%E3%80%81%E5%94%A4%E8%B5%B7%E6%94%B6%E9%93%B6%E5%8F%B0%EF%BC%9Attpay" target="_blank" rel="noopener noreferrer">这里</a>，查看「唤起收银台」一栏。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">tt<span class="token punctuation">.</span><span class="token function">pay</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">orderInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">order_id</span><span class="token operator">:</span>  <span class="token string">&#39;order_idxxxxxxxx&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">order_token</span><span class="token operator">:</span> <span class="token string">&#39;order_tokenxxxxxxxx&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">service</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 支付成功处理逻辑，只有res.code=0时，才表示支付成功</span></span>
<span class="line">            <span class="token comment">// 但是最终状态要以商户后端结果为准</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 调起收银台失败处理逻辑</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">方法名</th><th style="text-align:center;">参数</th><th style="text-align:center;">返回值</th></tr></thead><tbody><tr><td style="text-align:center;">query/queryRefund</td><td style="text-align:center;">string $orderSn</td><td style="text-align:center;">Collection</td></tr></tbody></table><h2 id="查询支付" tabindex="-1"><a class="header-anchor" href="#查询支付"><span>查询支付</span></a></h2><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre class="language-php"><code><span class="line"><span class="token variable">$pay</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\\</span>fengkui<span class="token punctuation">\\</span>Pay<span class="token punctuation">\\</span>Bytedance</span><span class="token punctuation">(</span><span class="token variable">$bytedanceConfig</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$orderSn</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;order_snxxxxxxxx&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 商户订单号</span></span>
<span class="line"><span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$pay</span><span class="token operator">-&gt;</span><span class="token function">queryOrder</span><span class="token punctuation">(</span><span class="token variable">$orderSn</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>相关返回参数说明，请参考<a href="https://microapp.bytedance.com/docs/zh-CN/mini-app/develop/server/ecpay/APIlist/pay/#%E4%B8%89%E3%80%81%E6%94%AF%E4%BB%98%E7%BB%93%E6%9E%9C%E6%9F%A5%E8%AF%A2" target="_blank" rel="noopener noreferrer">这里</a>，查看「响应示例」一栏。</p>`,18),l=[p];function i(c,o){return a(),s("div",null,l)}const d=n(t,[["render",i],["__file","pay.html.vue"]]),u=JSON.parse('{"path":"/bytedance/pay.html","title":"支付","lang":"zh-CN","frontmatter":{"title":"支付"},"headers":[{"level":2,"title":"小程序","slug":"小程序","link":"#小程序","children":[{"level":3,"title":"例子","slug":"例子","link":"#例子","children":[]},{"level":3,"title":"订单配置参数","slug":"订单配置参数","link":"#订单配置参数","children":[]},{"level":3,"title":"调用支付","slug":"调用支付","link":"#调用支付","children":[]}]},{"level":2,"title":"查询支付","slug":"查询支付","link":"#查询支付","children":[]}],"git":{"updatedTime":1712041033000,"contributors":[{"name":"kuifeng","email":"1161634940@qq.com","commits":1}]},"filePathRelative":"bytedance/pay.md"}');export{d as comp,u as data};
